(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-flow-flowitem-overflow-userCarFlow-userCarFlowWillDetail"],{"2b0f":function(t,e,i){"use strict";i.r(e);var n=i("6137"),s=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=s.a},6137:function(t,e,i){"use strict";i("4de4"),i("c975"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n="",s="",a="",o="",l="",r="",c="",u="",d="",f=i("8a5b"),p=i("60aa"),g=i("586b"),h={components:{},data:function(){return{write:g.write,read:g.read,bmfzryj:"",bmfzrRemote:1,bgsyj:"",bgsRemote:1,fgldyj:"",fgldRemote:1,type:"",title:"",person:"",ecard:"",department:"",carNo:"",userCode:"",userName:"",leader:"",leaderCode:"",leaderName:"",driver:"",userTime:"",reason:"",flowAssignId:"",nametemp:[],allnametemp:[],codetemp:[],allcodetemp:[],bigNametemp:[],bigCodetemp:[],destTypeList:[],namelist:[],selectperson:[],selectindex:[],test:[]}},onLoad:function(t){n=t.activityName,s=t.taskId,a=t.piId,r=t.executionId,console.log(t),console.log(n+s+a+r),this.getUserCarFlowDetail()},methods:{getUserCarFlowDetail:function(t){var e=this;f.sendGetRequestJson({url:p.willdodetail,data:{activityName:n,taskId:s,piId:a},successCallBack:function(t){console.log(t),t.mainform[0].runId,e.person=t.mainform[0].sqr,e.department=t.mainform[0].sqbm,e.carNo=t.mainform[0].gwch,e.driver=t.mainform[0].jsy,e.userTime=t.mainform[0].syqx,e.reason=t.mainform[0].sqsy,e.bmfzryj=t.mainform[0].bmfzryj,e.bmfzrRemote=t.formRights[0].bmfzryj,console.log(e.bmfzrRemote),e.bgsyj=t.mainform[0].bgsyj,e.bgsRemote=t.formRights.bgsyj,e.fgldyj=t.mainform[0].fgldyj,e.fgldRemote=t.formRights.fgldyj;for(var i=0;i<t.trans.length;i++)e.destTypeList.push(t.trans[i])},failCallBack:function(t){print(t),console.log(t)}})},getFlowLine:function(t){if(this.bmfzrRemote!=g.write||this.bmfzryj)if(this.bgsRemote!=g.write||this.bgsyj)if(this.fgldRemote!=g.write||this.fgldyj)if(1==this.destTypeList.length)console.log("11"),c=this.destTypeList[0].destType,u=this.destTypeList[0].destination,this.selectperson=[],-1!=c.indexOf("decision")||-1!=c.indexOf("fork")||-1!=c.indexOf("join")?(console.log("1"),this.getOnLine()):-1==c.indexOf("end")?(console.log("2"),this.getNoEndLine()):(console.log("3"),this.getNoHandlerLine()),d=this.destTypeList[0].name;else{console.log("22");for(var e=0;e<this.destTypeList.length;e++)this.namelist.push(this.destTypeList[e].name);uni.showActionSheet({itemList:this.namelist,success:function(t){c=t.destType,u=t.destination,this.selectperson=[],-1!=c.indexOf("decision")||-1!=c.indexOf("fork")||-1!=c.indexOf("join")?this.getOnLine():-1==c.indexOf("end")?this.getNoEndLine():this.getNoHandlerLine(),d=this.destTypeList[0].name},fail:function(t){print(t.errMsg)}})}else uni.showToast({title:"请签字",icon:"none",duration:800,position:"bottom"});else uni.showToast({title:"请签字",icon:"none",duration:800,position:"bottom"});else uni.showToast({title:"请签字",icon:"none",duration:800,position:"bottom"})},getOnLine:function(t){var e=this;f.sendGetRequestJson({url:p.online,data:{taskId:s,activityName:u,isParentFlow:!1},successCallBack:function(t){console.log("online---"+t),console.log(t);for(var i=0;i<t.data.length;i++)e.test.push(t.data[i]);e.togglePopup("center","tip")},failCallBack:function(t){print(t)}})},getNoEndLine:function(t){var e=this;f.sendGetRequestJson({url:p.noendline,data:{taskId:s,activityName:u,isParentFlow:!1},successCallBack:function(t){console.log("NoEndLine---"),console.log(t);for(var i=0;i<t.data.length;i++)e.test.push(t.data[i]);e.togglePopup("center","tip")},failCallBack:function(t){print(t),console.log(t)}})},getNoHandlerLine:function(t){var e=this;f.sendGetRequestJson({url:p.nohandlerline,data:{taskId:s},successCallBack:function(t){console.log("3"),e.UpData()},failCallBack:function(t){print(t),console.log(t)}})},togglePopup:function(t,e){var i=this;switch(t){case"top":this.content="顶部弹出 popup";break;case"bottom":this.content="底部弹出 popup";break;case"center":this.content="居中弹出 popup";break}this.type=t,this.$nextTick((function(){i.$refs["show"+e].open()}))},cancel:function(t){this.$refs["show"+t].close()},change:function(t){console.log("是否打开:"+t.show),0==this.selectperson.length?(print("请选择审批人"),console.log("请选择审批人:")):this.UpData()},listClient:function(t,e){0==this.selectperson.length?this.selectperson.push(t):-1!=this.selectperson.indexOf(t)?this.selectperson=this.selectperson.filter((function(e){return e!=t})):this.selectperson.push(t)},UpData:function(t){if(1==this.selectperson.length&&(o=this.selectperson[0].userCodes,this.flowAssignId=this.selectperson[0].role+"|"+this.selectperson[0].userCodes),this.selectperson.length>1){for(var e=1;e<this.selectperson.length;e++)e<this.selectperson.length-1?o=o+this.selectperson[e].userCodes+":":o+=this.selectperson[e].userCodes;for(e=1;e<this.selectperson.length;e++)e<this.selectperson.length-1?l=l+this.selectperson[e].role+":":l+=this.selectperson[e].role;o=this.selectperson[0].userCodes+":"+o,l=this.selectperson[0].role+":"+l,this.flowAssignId=l+"|"+o}console.log(o),console.log(this.flowAssignId);var i=this;f.sendPostRequestJson({url:p.willflowup,data:{useTemplate:!1,startFlow:!0,destName:u,sendMsg:!0,sendMail:!0,taskId:s,flowAssignId:i.flowAssignId,defId:g.userCarDefId,formDefId:g.userCarFormDefId,signaName:d,sqbmDid:uni.getStorageSync("depId"),sqbm:uni.getStorageSync("depName"),sqrUId:uni.getStorageSync("userId"),sqr:i.person,sj:i.date,gwch:i.carNo,jsyUId:i.userCode,jsy:i.driver,syqx:i.userTime,sqsy:i.reason,bmfzryj:i.bmfzryj,bgsyj:i.bgsyj,fgldyj:i.fgldyj},successCallBack:function(t){console.log(t),console.log(t.success),(t.success="true")&&uni.navigateBack({delta:1}),uni.navigateBack({delta:1})},failCallBack:function(t){print(t),console.log(t)}})}}};e.default=h},"823a":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,"uni-page-body[data-v-1288857f]{min-height:100%;height:auto}.item[data-v-1288857f]{display:-webkit-box;display:-webkit-flex;display:flex;width:100%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#fff;min-height:%?100?%}.hourLine[data-v-1288857f]{height:%?1?%;width:100%;background-color:grey;margin-left:%?10?%;margin-right:%?10?%}.itemName[data-v-1288857f]{height:%?100?%;width:%?180?%;display:-webkit-box;display:-webkit-flex;display:flex;line-height:auto;margin-left:%?10?%;font-size:%?30?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;line-height:%?150?%}.itemNamearea[data-v-1288857f]{height:%?150?%;width:%?180?%;display:-webkit-box;display:-webkit-flex;display:flex;line-height:auto;margin-left:%?10?%;font-size:%?30?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;line-height:%?150?%}.inputarea[data-v-1288857f]{display:block;width:auto;height:-webkit-max-content;height:max-content;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;auto-height:true}.itemValue[data-v-1288857f]{-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;position:relative}.input[data-v-1288857f]{min-height:%?100?%;font-size:%?30?%;display:inline-block;text-align:left;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-flex-wrap:wrap;flex-wrap:wrap}.t-header[data-v-1288857f]{height:%?120?%;border-bottom:grey %?0.5?% solid;border-right:grey %?0.5?% solid;border-top:grey %?0.5?% solid;background-color:#fff;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;text-align:center;line-height:%?120?%;font-size:%?30?%}.btn[data-v-1288857f]{margin:%?50?%;background-color:#007aff;color:#fff}.input[data-v-1288857f]{font-size:%?30?%;line-height:%?90?%}\r\n\r\n/* 提示窗口 */.uni-tip[data-v-1288857f]{\r\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;\r\npadding:15px;width:300px;background-color:#fff;border-radius:10px}.uni-tip-title[data-v-1288857f]{margin-bottom:10px;text-align:center;font-weight:700;font-size:16px;color:#333}.uni-tip-content[data-v-1288857f]{\r\n\t/* padding: 15px;\r\n  */font-size:14px;color:#666}.uni-tip-group-button[data-v-1288857f]{\r\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\r\n-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;margin-top:20px}.uni-tip-button[data-v-1288857f]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:center;font-size:14px;color:#3b4144}",""]),t.exports=e},b0cd:function(t,e,i){"use strict";var n=i("c27a"),s=i.n(n);s.a},c27a:function(t,e,i){var n=i("823a");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=i("4f06").default;s("0220b6b6",n,!0,{sourceMap:!1,shadowMode:!1})},c370:function(t,e,i){"use strict";i.r(e);var n=i("f681"),s=i("2b0f");for(var a in s)"default"!==a&&function(t){i.d(e,t,(function(){return s[t]}))}(a);i("b0cd");var o,l=i("f0c5"),r=Object(l["a"])(s["default"],n["b"],n["c"],!1,null,"1288857f",null,!1,n["a"],o);e["default"]=r.exports},f681:function(t,e,i){"use strict";var n={"uni-popup":i("e6e1").default},s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-scroll-view",{attrs:{"scroll-y":"true"}},[i("v-uni-view",[i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName"},[t._v("申请人:")]),i("v-uni-text",{staticClass:"input",attrs:{placeholder:"请选择申请人"}},[t._v(t._s(t.person))])],1),i("v-uni-view",{staticClass:"hourLine"}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName"},[t._v("申请部门:")]),i("v-uni-text",{staticClass:"input",attrs:{placeholder:"请选择申请部门"}},[t._v(t._s(t.department))])],1),i("v-uni-view",{staticClass:"hourLine"}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName"},[t._v("公务车号*:")]),i("v-uni-text",{staticClass:"input"},[t._v(t._s(t.carNo))])],1),i("v-uni-view",{staticClass:"hourLine"}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName"},[t._v("驾驶员*:")]),i("v-uni-text",{staticClass:"input"},[t._v(t._s(t.driver))])],1),i("v-uni-view",{staticClass:"hourLine"}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName"},[t._v("使用期限*:")]),i("v-uni-input",{staticClass:"input",attrs:{placeholder:"请输入使用期限"},model:{value:t.userTime,callback:function(e){t.userTime=e},expression:"userTime"}})],1),i("v-uni-view",{staticClass:"hourLine"}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[t._v("申请事由*:")]),i("v-uni-textarea",{staticClass:"input",staticStyle:{"padding-left":"25rpx"},attrs:{"auto-height":!0,placeholder:"请输入申请事由"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1),i("v-uni-view",{staticClass:"hourLine"}),i("v-uni-view",{staticClass:"item",staticStyle:{"background-color":"#CCCCCC",height:"35rpx"}}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[t._v("部门负责人:")]),t.bmfzrRemote==t.read?i("v-uni-text",{staticClass:"input",attrs:{"auto-height":!0},model:{value:t.bmfzryj,callback:function(e){t.bmfzryj=e},expression:"bmfzryj"}}):t._e(),t.bmfzrRemote==t.write?i("v-uni-textarea",{staticClass:"input",attrs:{"auto-height":!0},model:{value:t.bmfzryj,callback:function(e){t.bmfzryj=e},expression:"bmfzryj"}}):t._e()],1),i("v-uni-view",{staticClass:"hourLine"}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[t._v("办公室意见*:")]),t.bgsRemote==t.read?i("v-uni-text",{staticClass:"input",staticStyle:{"padding-top":"30rpx","padding-left":"25rpx"},attrs:{"auto-height":!0},model:{value:t.bgsyj,callback:function(e){t.bgsyj=e},expression:"bgsyj"}}):t._e(),t.bgsRemote==t.write?i("v-uni-textarea",{staticClass:"input",staticStyle:{"padding-top":"30rpx","padding-left":"25rpx"},attrs:{"auto-height":!0},model:{value:t.bgsyj,callback:function(e){t.bgsyj=e},expression:"bgsyj"}}):t._e()],1),i("v-uni-view",{staticClass:"hourLine"}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[t._v("分管领导*:")]),t.fgldRemote==t.read?i("v-uni-text",{staticClass:"input",staticStyle:{"padding-top":"30rpx","padding-left":"25rpx"},attrs:{"auto-height":!0},model:{value:t.fgldyj,callback:function(e){t.fgldyj=e},expression:"fgldyj"}}):t._e(),t.fgldRemote==t.write?i("v-uni-textarea",{staticClass:"input",staticStyle:{"padding-top":"30rpx","padding-left":"25rpx"},attrs:{"auto-height":!0},model:{value:t.fgldyj,callback:function(e){t.fgldyj=e},expression:"fgldyj"}}):t._e()],1),i("v-uni-view",{staticClass:"hourLine"}),i("uni-popup",{ref:"showtip",attrs:{type:t.type,"mask-click":!1},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"uni-tip"},[t._l(t.test,(function(e,n){return i("v-uni-view",{key:n},[i("v-uni-view",{staticClass:"list-item",attrs:{showArrow:!1},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.listClient(e,n)}}},[i("v-uni-label",[i("v-uni-checkbox",{attrs:{value:e.userCodes+"("+e.role+")"}}),i("v-uni-text",[t._v(t._s(e.userCodes+"("+e.role+")"))])],1)],1)],1)})),i("v-uni-view",{staticClass:"uni-tip-group-button"},[i("v-uni-text",{staticClass:"uni-tip-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel("tip")}}},[t._v("取消")]),i("v-uni-text",{staticClass:"uni-tip-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel("tip")}}},[t._v("确定")])],1)],2)],1),i("v-uni-button",{staticClass:"btn",attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getFlowLine.apply(void 0,arguments)}}},[t._v(t._s("提交"))])],1)],1)],1)},a=[];i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}))}}]);