(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-flow-flowitem-overflow-userCarFlow-userCarFlowWillDetail"],{"0123":function(e,t,i){"use strict";var s=i("a11a"),n=i.n(s);n.a},"0812":function(e,t,i){"use strict";var s={"uni-popup":i("6eb2").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-scroll-view",{attrs:{"scroll-y":"true"}},[i("v-uni-view",[i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName"},[e._v("申请人:")]),i("v-uni-text",{staticClass:"input",attrs:{placeholder:"请选择申请人"}},[e._v(e._s(e.person))])],1),i("v-uni-view",{staticClass:"hourLine"}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName"},[e._v("申请部门:")]),i("v-uni-text",{staticClass:"input",attrs:{placeholder:"请选择申请部门"}},[e._v(e._s(e.department))])],1),i("v-uni-view",{staticClass:"hourLine"}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName"},[e._v("公务车号*:")]),i("v-uni-text",{staticClass:"input"},[e._v(e._s(e.carNo))])],1),i("v-uni-view",{staticClass:"hourLine"}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName"},[e._v("驾驶员*:")]),i("v-uni-text",{staticClass:"input"},[e._v(e._s(e.driver))])],1),i("v-uni-view",{staticClass:"hourLine"}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName"},[e._v("使用期限*:")]),i("v-uni-input",{staticClass:"input",attrs:{placeholder:"请输入使用期限"},model:{value:e.userTime,callback:function(t){e.userTime=t},expression:"userTime"}})],1),i("v-uni-view",{staticClass:"hourLine"}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[e._v("申请事由*:")]),i("v-uni-textarea",{staticClass:"input",attrs:{"auto-height":!0,placeholder:"请输入申请事由"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1),i("v-uni-view",{staticClass:"vText"}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[e._v("部门负责人:")]),e.bmfzrRemote==e.read?i("v-uni-text",{staticClass:"input",attrs:{"auto-height":!0},model:{value:e.bmfzryj,callback:function(t){e.bmfzryj=t},expression:"bmfzryj"}}):e._e(),e.bmfzrRemote==e.write?i("v-uni-textarea",{staticClass:"input",attrs:{"auto-height":!0},model:{value:e.bmfzryj,callback:function(t){e.bmfzryj=t},expression:"bmfzryj"}}):e._e()],1),i("v-uni-view",{staticClass:"hourLine"}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[e._v("办公室意见*:")]),e.bgsRemote==e.read?i("v-uni-text",{staticClass:"input",attrs:{"auto-height":!0},model:{value:e.bgsyj,callback:function(t){e.bgsyj=t},expression:"bgsyj"}}):e._e(),e.bgsRemote==e.write?i("v-uni-textarea",{staticClass:"input",attrs:{"auto-height":!0},model:{value:e.bgsyj,callback:function(t){e.bgsyj=t},expression:"bgsyj"}}):e._e()],1),i("v-uni-view",{staticClass:"hourLine"}),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"itemName",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[e._v("分管领导*:")]),e.fgldRemote==e.read?i("v-uni-text",{staticClass:"input",attrs:{"auto-height":!0},model:{value:e.fgldyj,callback:function(t){e.fgldyj=t},expression:"fgldyj"}}):e._e(),e.fgldRemote==e.write?i("v-uni-textarea",{staticClass:"input",attrs:{"auto-height":!0},model:{value:e.fgldyj,callback:function(t){e.fgldyj=t},expression:"fgldyj"}}):e._e()],1),i("v-uni-view",{staticClass:"hourLine"}),i("uni-popup",{ref:"showtip",attrs:{type:e.type,"mask-click":!1},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.change.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"uni-tip"},[e._l(e.personLine,(function(t,s){return i("v-uni-view",{key:s},[i("v-uni-view",{staticClass:"list-item",attrs:{showArrow:!1},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.listClient(t,s)}}},[i("v-uni-label",[t.checked?i("v-uni-text",{staticClass:"text"},[e._v(e._s(t.userNames+"("+t.role+")"))]):i("v-uni-text",{staticClass:"text1"},[e._v(e._s(t.userNames+"("+t.role+")"))])],1)],1)],1)})),i("v-uni-view",{staticClass:"uni-tip-group-button"},[i("v-uni-text",{staticClass:"uni-tip-button",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.cancel("tip")}}},[e._v("取消")]),i("v-uni-text",{staticClass:"uni-tip-button",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.cancel("tip")}}},[e._v("确定")])],1)],2)],1),i("v-uni-button",{staticClass:"btn",attrs:{type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getFlowLine.apply(void 0,arguments)}}},[e._v(e._s("提交"))])],1)],1)],1)},o=[];i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return s}))},6316:function(e,t,i){"use strict";i.r(t);var s=i("0812"),n=i("872e");for(var o in n)"default"!==o&&function(e){i.d(t,e,(function(){return n[e]}))}(o);i("0123");var a,l=i("f0c5"),r=Object(l["a"])(n["default"],s["b"],s["c"],!1,null,"22ca17d5",null,!1,s["a"],a);t["default"]=r.exports},"81c7":function(e,t,i){var s=i("24fb");t=s(!1),t.push([e.i,"uni-page-body[data-v-22ca17d5]{min-height:100%;height:auto}.item[data-v-22ca17d5]{display:-webkit-box;display:-webkit-flex;display:flex;width:100%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#fff;min-height:%?100?%}.hourLine[data-v-22ca17d5]{height:%?1?%;width:100%;background-color:grey;margin-left:%?10?%;margin-right:%?10?%}.itemName[data-v-22ca17d5]{height:%?100?%;width:%?180?%;display:-webkit-box;display:-webkit-flex;display:flex;line-height:auto;margin-left:%?10?%;font-size:%?30?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;line-height:%?150?%}.itemNamearea[data-v-22ca17d5]{height:%?150?%;width:%?180?%;display:-webkit-box;display:-webkit-flex;display:flex;line-height:auto;margin-left:%?10?%;font-size:%?30?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;line-height:%?150?%}.inputarea[data-v-22ca17d5]{display:block;width:auto;height:-webkit-max-content;height:max-content;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;auto-height:true}.itemValue[data-v-22ca17d5]{-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;position:relative}.input[data-v-22ca17d5]{min-height:%?100?%;font-size:%?30?%;display:inline-block;text-align:left;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-flex-wrap:wrap;flex-wrap:wrap;margin-left:%?15?%}.t-header[data-v-22ca17d5]{height:%?120?%;border-bottom:grey %?0.5?% solid;border-right:grey %?0.5?% solid;border-top:grey %?0.5?% solid;background-color:#fff;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;text-align:center;line-height:%?120?%;font-size:%?30?%}.text[data-v-22ca17d5]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;height:%?65?%;color:#dc3545;-webkit-box-pack:left;-webkit-justify-content:left;justify-content:left;border-bottom:#000 solid %?1?%}.text1[data-v-22ca17d5]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;height:%?65?%;-webkit-box-pack:left;-webkit-justify-content:left;justify-content:left;border-bottom:#000 solid %?1?%}.vText[data-v-22ca17d5]{height:%?45?%;width:100%;background-color:#d0dee5}.btn[data-v-22ca17d5]{margin:%?50?%;background-color:#007aff;color:#fff}.input[data-v-22ca17d5]{font-size:%?30?%;line-height:%?90?%}\n\n/* 提示窗口 */.uni-tip[data-v-22ca17d5]{\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;\npadding:15px;width:300px;background-color:#fff;border-radius:10px}.uni-tip-title[data-v-22ca17d5]{margin-bottom:10px;text-align:center;font-weight:700;font-size:16px;color:#333}.uni-tip-content[data-v-22ca17d5]{\n\t/* padding: 15px;\n  */font-size:14px;color:#666}.uni-tip-group-button[data-v-22ca17d5]{\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\n-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;margin-top:20px}.uni-tip-button[data-v-22ca17d5]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:center;font-size:14px;color:#3b4144}",""]),e.exports=t},"864d":function(e,t,i){"use strict";i("4de4"),i("c975"),i("ac1f"),i("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s="",n="",o="",a="",l="",r="",c="",u="",d="",f="",p="",g="",h=i("9d92"),m=i("8e21"),v=i("5041"),b=i("a426"),w={components:{},data:function(){return{write:v.write,read:v.read,bmfzryj:"",bmfzrRemote:1,bgsyj:"",bgsRemote:1,fgldyj:"",fgldRemote:1,type:"",title:"",person:"",ecard:"",department:"",carNo:"",userCode:"",userName:"",leader:"",leaderCode:"",leaderName:"",driver:"",userTime:"",reason:"",flowAssignId:"",personLine:[],personLine1:[],comments:"",destTypeList:[],selectperson:[]}},onLoad:function(e){s=e.activityName,n=e.taskId,o=e.piId,r=e.executionId,console.log(e),console.log(s+n+o+r),this.getUserCarFlowDetail()},methods:{getUserCarFlowDetail:function(e){var t=this;h.sendGetRequestJson({url:m.willdodetail,data:{activityName:s,taskId:n,piId:o},successCallBack:function(e){console.log(e),e.mainform[0].runId,t.person=e.mainform[0].sqr,t.department=e.mainform[0].sqbm,t.carNo=e.mainform[0].gwch,t.driver=e.mainform[0].jsy,t.userTime=e.mainform[0].syqx,t.reason=e.mainform[0].sqsy,t.bmfzryj=e.mainform[0].bmfzryj,t.bmfzrRemote=e.formRights[0].bmfzryj,t.bgsyj=e.mainform[0].bgsyj,t.bgsRemote=e.formRights[0].bgsyj,t.fgldyj=e.mainform[0].fgldyj,t.fgldRemote=e.formRights[0].fgldyj;for(var i=0;i<e.trans.length;i++)t.destTypeList.push(e.trans[i])},failCallBack:function(e){print(e.msg),console.log(e)}})},getFlowLine:function(e){if(this.bmfzrRemote!=v.write||this.bmfzryj)if(this.bgsRemote!=v.write||this.bgsyj)if(this.fgldRemote!=v.write||this.fgldyj)if(1==this.destTypeList.length)console.log("11"),c=this.destTypeList[0].destType,u=this.destTypeList[0].destination,this.selectperson=[],-1!=c.indexOf("decision")||-1!=c.indexOf("fork")||-1!=c.indexOf("join")?(console.log("1"),this.getOnLine()):-1==c.indexOf("end")?(console.log("2"),this.getNoEndLine()):(console.log("3"),this.getNoHandlerLine()),d=this.destTypeList[0].name;else{console.log("22");for(var t=0;t<this.destTypeList.length;t++)this.namelist.push(this.destTypeList[t].name);uni.showActionSheet({itemList:this.namelist,success:function(e){c=e.destType,u=e.destination,this.selectperson=[],-1!=c.indexOf("decision")||-1!=c.indexOf("fork")||-1!=c.indexOf("join")?this.getOnLine():-1==c.indexOf("end")?this.getNoEndLine():this.getNoHandlerLine(),d=this.destTypeList[0].name},fail:function(e){print(e.errMsg)}})}else uni.showToast({title:"请签字",icon:"none",duration:800,position:"bottom"});else uni.showToast({title:"请签字",icon:"none",duration:800,position:"bottom"});else uni.showToast({title:"请签字",icon:"none",duration:800,position:"bottom"})},getOnLine:function(e){var t=this;h.sendGetRequestJson({url:m.online,data:{taskId:n,activityName:u,isParentFlow:!1},successCallBack:function(e){console.log("online1---"+e),console.log(e),t.personLine=[],t.personLine1=[];for(var i=0;i<e.data.length;i++)t.personLine1.push(e.data[i]);for(i=0;i<t.personLine1.length;i++){for(var s=t.personLine1[i].userNames.split(","),n=t.personLine1[i].userCodes.split(","),o=0;o<s.length;o++){var a={checked:t.personLine1[i].checked,role:t.personLine1[i].role,route:t.personLine1[i].route,type:t.personLine1[i].type,userCodes:n[o],userNames:s[o]};t.personLine.push(a)}console.log(t.personLine)}t.togglePopup("center","tip")},failCallBack:function(e){print(e)}})},getNoEndLine:function(e){var t=this;h.sendGetRequestJson({url:m.noendline,data:{taskId:n,activityName:u,isParentFlow:!1},successCallBack:function(e){console.log("NoEndLine2---"),console.log(e),t.personLine=[],t.personLine1=[];for(var i=0;i<e.data.length;i++)t.personLine1.push(e.data[i]);for(i=0;i<t.personLine1.length;i++){for(var s=t.personLine1[i].userNames.split(","),n=t.personLine1[i].userCodes.split(","),o=0;o<s.length;o++){var a={checked:t.personLine1[i].checked,role:t.personLine1[i].role,route:t.personLine1[i].route,type:t.personLine1[i].type,userCodes:n[o],userNames:s[o]};t.personLine.push(a)}console.log(t.personLine)}t.togglePopup("center","tip")},failCallBack:function(e){print(e),console.log(e)}})},getNoHandlerLine:function(e){var t=this;h.sendGetRequestJson({url:m.nohandlerline,data:{taskId:n},successCallBack:function(e){console.log("3"),t.UpData()},failCallBack:function(e){print(e),console.log(e)}})},togglePopup:function(e,t){var i=this;switch(e){case"top":this.content="顶部弹出 popup";break;case"bottom":this.content="底部弹出 popup";break;case"center":this.content="居中弹出 popup";break}this.type=e,this.$nextTick((function(){i.$refs["show"+t].open()}))},cancel:function(e){this.$refs["show"+e].close()},change:function(e){console.log("是否打开:"+e.show),0==this.selectperson.length?(print("请选择审批人"),console.log("请选择审批人:")):this.UpData()},listClient:function(e,t){0==this.selectperson.length?(e.checked=!0,this.selectperson.push(e),console.log(this.selectperson)):-1!=this.selectperson.indexOf(e)?(e.checked=!1,this.selectperson.push(e),this.selectperson=this.selectperson.filter((function(t){return t!=e})),console.log(this.selectperson)):(e.checked=!0,this.selectperson.push(e),console.log(this.selectperson))},UpData:function(e){if(this.bmfzrRemote==this.write?this.comments=this.bmfzryj:this.bgsRemote==this.write?this.comments=this.bgsyj:this.fgldRemote==this.write&&(this.comments=this.fgldyj),1==this.selectperson.length&&(a=this.selectperson[0].userCodes,this.flowAssignId=this.selectperson[0].role+"|"+this.selectperson[0].userCodes),this.selectperson.length>1){console.log(this.selectperson.length+"-------------++++++++++++");for(var t=0;t<this.selectperson.length;t++)""!=a?-1!=l.indexOf(this.selectperson[t].role)?(a=a+","+this.selectperson[t].userCodes,console.log(l+"+###########################1")):(l=l+":"+this.selectperson[t].role,a=a+":"+this.selectperson[t].userCodes,console.log(l+"+###########################2")):(console.log(l+"+###########################3"),l=this.selectperson[t].role,a=this.selectperson[t].userCodes);this.flowAssignId=l+"|"+a,console.log(this.flowAssignId+"+###########################")}console.log(a),console.log(this.flowAssignId);var i=this;h.sendPostRequestJson({url:m.willflowup,data:{useTemplate:!1,startFlow:!0,destName:u,sendMsg:!0,sendMail:!0,taskId:n,flowAssignId:i.flowAssignId,defId:v.userCarDefId,formDefId:v.userCarFormDefId,signaName:d,sqbmDid:uni.getStorageSync("depId"),sqbm:uni.getStorageSync("depName"),sqrUId:uni.getStorageSync("userId"),sqr:i.person,sj:i.date,gwch:i.carNo,jsyUId:i.userCode,jsy:i.driver,syqx:i.userTime,sqsy:i.reason,comments:i.comments,bmfzryj:i.makeData(i.bmfzryj),bgsyj:i.bgsyj,fgldyj:i.fgldyj},successCallBack:function(e){console.log(e),console.log(e.success),(e.success="true")&&uni.navigateBack({delta:1}),uni.navigateBack({delta:1})},failCallBack:function(e){print(e),console.log(e)}})},makeData:function(e){return console.log(e+"-------------"),p=uni.getStorageSync("userId"),f=uni.getStorageSync("userName"),g=b.getTime(),"[{ui:"+p+"un:"+f+"c:"+g+"v:"+this.e+"}]"}}};t.default=w},"872e":function(e,t,i){"use strict";i.r(t);var s=i("864d"),n=i.n(s);for(var o in s)"default"!==o&&function(e){i.d(t,e,(function(){return s[e]}))}(o);t["default"]=n.a},a11a:function(e,t,i){var s=i("81c7");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var n=i("4f06").default;n("615f9571",s,!0,{sourceMap:!1,shadowMode:!1})}}]);